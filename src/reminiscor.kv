#Reminiscor is a free offline password manager.
#Copyright (C) 2020 Arjun Somvanshi & Manvendra Somvanshi

#This program is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation, either version 3 of the License, or
#(at your option) any later version.

#This program is distributed in the hope that it will be useful,
#but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.

#You should have received a copy of the GNU General Public License
#along with this program.  If not, see <https://www.gnu.org/licenses/>.

#: import RGBA kivy.utils.rgba
#: import Window kivy.core.window.Window
#: import SlideTransition kivy.uix.screenmanager.SlideTransition
Screen_Manager:
    Login:
    Main:
    AddEntry:
<CustomLabel@Label>:
    color: app.color['main']
    font_name: 'Fonts/Montserrat-Light.ttf'
    disabled_color: self.color
    markup: True
<UIButton@Button>:
    background_normal: 'UI/Mainbuttondown.png'
    background_down: 'UI/Mainbutton.png'
    markup: True
    font_name: 'Fonts/Montserrat-Light.ttf'
    font: sp(15)
    color: app.color['font']
    background_disabled_normal: self.background_normal
    background_disabled_down: self.background_down
    disabled_color: self.color
<CustomTextInput>:
    background_color:  app.color['middle']
    background_normal: ''
    foreground_color: app.color['font']
    padding: 6,(self.height-self.line_height)/2,6,6
    multiline: False
    background_disabled_normal: ''
    font_name: 'Fonts/Montserrat-Light.ttf'
    font_size: self.width/22 if self.width/22>sp(18) else sp(18)
    cursor_color: app.color['main']
    hint_text_color: app.color['darkgrey']
    size_hint_y: None
    write_tab: False
    disabled_foreground_color: self.foreground_color if self.text else self.hint_text_color
    disabled_background_color: self.background_color if self.text else self.hint_text_color

<EntryTextInput>:
    background_color:  app.color['middle']
    background_normal: ''
    foreground_color: app.color['font']
    padding: 6,(self.height-self.line_height)/2,6,6
    multiline: False
    background_disabled_normal: ''
    font_name: 'Fonts/Montserrat-Light.ttf'
    cursor_color: app.color['main']
    hint_text_color: app.color['darkgrey']
    size_hint_y: None
    write_tab: False
    disabled_foreground_color: self.foreground_color if self.text else self.hint_text_color
    disabled_background_color: self.background_color if self.text else self.hint_text_color

<UIDropDownItem>:
    canvas.before:
        Color:
            rgba: ((root.item_color[0] if self.state == 'normal' else root.item_color[1]) if root.rounded == False else (0,0,0,0))
        Rectangle:
            size: self.size
            pos: self.pos
        Color: 
            rgba: ((root.item_color[0] if self.state == 'normal' else root.item_color[1]) if root.rounded == True else (0,0,0,0))
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [self.height/2]
        Color:
            rgba: app.color['font']
        Line:
            points: [self.x, self.y, self.x + self.width, self.y]
            width: dp(0.25)
    background_color: (1,1,1,0)
    background_normal: root.background_img_normal
    backgrond_down: root.background_img_down
    font_name: root.item_font
    font_size: root.item_font_size
    color: root.item_font_color

<UIDropDownContent>:
    canvas.before:
        Color:
            rgba: root.background_color 
        Rectangle:
            size: self.size
            pos: self.pos
        Color:
            rgba: app.color['main']
        Line:
            points: [self.x + (self.width*0.125), self.y, self.x, self.y, self.x, self.y + self.height, self.x + (self.width*0.125), self.y + self.height]
            width: dp(1.5)
        Line:
            points: [self.x + self.width - (self.width*0.125), self.y, self.x + self.width, self.y, self.x + self.width, self.y + self.height, self.x + self.width - (self.width*0.125), self.y + self.height]
            width: dp(1.5)
    RecycleView:
        id: dropdownrv
        viewclass: 'UIDropDownItem'        
        data: root.Elements
        RecycleBoxLayout:
            default_size_hint: root.item_size_hint_x, None
            default_size: None, root.item_height 
            spacing: dp(15)
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
            padding: dp(20)
<UIDropDown>: 
    default_item: ''
    elements: []
    dd_size: [self.dd_width, self.dd_height]
    dd_width: dp(400)
    dd_height: dp(400)
    dd_background_color: [0,0,0,1]
    dd_item_height: dp(30)
    dd_item_color: [[1,1,1,1], [1,1,1,0.5]]
    dd_item_isrounded: False
    dd_item_img_down: self.background_down
    dd_item_img_normal: self.background_normal
    dd_item_size_hint_x: 1
    dd_item_font_size: sp(15)
    dd_item_font_color: [0,0,0,1]
    dd_item_font: 'Roboto'
    show_items: 1 
    calculate_ddheight: False
    font_name: 'Fonts/Montserrat-Light.ttf'
    #custom attributes here onwards
    background_normal: ''
    background_down: ''
    color: app.color['font']
    background_color: (0,0,0,0)
    canvas.before:
        Color:
            rgba: [40/255,40/255,40/255,1] if self.state == 'normal' else app.color['middle']
        Rectangle:
            size: self.size
            pos: self.pos
        Color:
            rgba: app.color['font']
        Line:
            points: [self.x, self.y, self.x, self.y + self.height]
    text: self.default_item 
    # for text fitting in drop down
    text_size: self.width - dp(10), None
    shorten: True
    shorten_from: 'right'
    halign: 'center'
#  --------------------- LOGIN SCREEN -----------------


<Login>:
    canvas:
	    Color:
	        rgba:30/255,30/255, 30/255, 1
		Rectangle: 
	        size: self.size
	        pos: self.pos
    name: 'login'
    BoxLayout: # this boxlayout centers the grid layout that contains the text inpot and buttons 
        canvas.before:
            Color:
                rgba:app.color['main']
            Line:
                points: [root.width/5,root.height,0,root.height,0,0]
                width: 10
                cap: "square"
            Line:
                points: [root.width-root.width/5,root.height,root.width,root.height,root.width,0]
                width: 10
                cap: "square"
        Widget: # Added widgets on each side of the gridlayout so that it's in between
            size_hint_x: 0.2 if app._platform!='android' else 0.08 # cause android has a lesser width
        GridLayout:
            cols: 1
            size_hint_max_x: dp(800) # this holds the grid layout in center, other wise the boxlayout down below sticks to left
            size_hint_min_x: dp(340)
            spacing: dp(30)
            padding: dp(20)
            CustomLabel:
                size_hint_y: 0.1
                text: 'Reminiscor'
                font_name: 'Fonts/Colchester.ttf'
                font_size: sp(80) if Window.size[1] < sp(670) else sp(95)
            BoxLayout: # this box layout is messy 
                canvas.before:
                    Color:
                        rgba: (37/255,37/255,37/255,1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: 15,15,15,15
                size_hint_max_y: dp(400)
                orientation: 'vertical'
                padding: dp(40)
                spacing: dp(10)
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    CustomLabel:
                        text: 'LOGIN:'
                        heigth: dp(30)
                        font_size: sp(30)
                    BoxLayout:
                        padding: dp(5)
                        spacing: dp(10)
                        CustomTextInput:
                            id: password
                            text: 'arjun2000'#remove this
                            hint_text: 'Master Password'
                            size_hint_y: None
                            password: True if view.state!='down' else False
                            height: dp(50)
                            font_size: self.width-self.width + sp(18)
                            halign: 'center'
                            size_hint_x: 0.8
                            size_hint_min_x: dp(160)
                            pos_hint: {'center_x': 0.5}
                    BoxLayout:
                        size_hint_y: None
                        height: dp(25)
                        Widget:
                        ToggleButton:
                            id:view
                            text: 'View'
                            color: app.color['main']
                            markup: True
                            size_hint: 0.2, None
                            height: dp(25)
                            size_hint_min_x: dp(42)
                            background_normal: 'UI/Mainbutton.png'
                            background_down: 'UI/editondown.png'
                        Widget:
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(20)
                    UIButton:
                        id: login
                        text: 'Login'
                        size_hint_max_y: dp(50)
                        size_hint_x: 0.5
                        pos_hint:{'center_x': 0.5}
                        background_normal: 'UI/Mainbutton.png'
                        background_down: 'UI/Mainbuttondown.png'
                        on_release:
                            root.auth_login()
                    UIButton:
                        id: signup
                        text: 'SignUp'
                        size_hint_max_y: dp(50)
                        size_hint_x: 0.5
                        pos_hint:{'center_x': 0.5}
                        background_normal: 'UI/Mainbutton.png'
                        background_down: 'UI/Mainbuttondown.png'
                        on_release: root.call_signup()
            CustomLabel:
                text: 'E N C R Y P T I N G    A N X I E T I E S'
                font_size: root.width/30 if root.width/30<sp(30) else sp(30)
                size_hint_y: 0.1
        Widget:
            size_hint_x: 0.2 if app._platform!='android' else 0.08
    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        padding: dp(15), dp(10)
        BoxLayout:
            size_hint: None,None
            size: dp(50), dp(110)
            orientation: 'vertical'
            spacing: dp(10)
            UIButton:
                text: '?'
                font_size: sp(22)
                size_hint_y: None
                height: dp(50)
                on_release: root.tutorial()
            UIButton:
                text: 'i'
                font_size: sp(22)
                size_hint_y: None
                height: dp(50)
                on_release: root.welcome()
#  --------------------- WELCOME POPUP -----------------

<Welcome>:
    canvas.before:
        Color:
            rgba:app.color['main']
        Line:
            points: [self.x+self.width/5, self.top-dp(5), self.x, self.top-dp(5), self.x, self.y+dp(5)]
            width: 5
            cap: 'square'
        Line:
            points: [self.right-self.width/5, self.top-dp(5), self.right, self.top-dp(5), self.right, self.y+dp(5)]
            width: 5
            cap: 'square'
    orientation: 'vertical'
    padding: dp(20)
    spacing: dp(20)
    CustomLabel:
        text: 'Welcome'
        font_size: root.width/7 if root.width/7<sp(70) else sp(70)
        size_hint_max_y: dp(60)
        size_hint_y: 0.2
        font_name: 'Fonts/Colchester.ttf'
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        size_hint_y: 1
        bar_width: 3
        bar_color:[0,171/255,174/255,1]
        scroll_type: ['content', 'bars']
        CustomLabel:
            padding: dp(10), dp(10)
            text: root.text
            height: self.texture_size[1]
            text_size: self.width,None
            line_height: 1.5
            width: root.width - root.width/11
            halign: 'center'
            size_hint: None, None
            font_size: sp(18)
    GridLayout:
        spacing: dp(40)
        cols: 2
        padding: dp(10)
        size_hint_y: 0.25
        UIButton:
            id: close
            text: 'Close'
            size_hint_x: 0.3 if app._platform != 'android' else 0.35
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            size_hint_min_x: dp(30)
        UIButton:
            id: tutorial
            text: 'Take The Tutorial'
            size_hint_max_x: dp(300)
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)


#  --------------------- SIGN UP POPUP -----------------



<Signup>:
    padding: dp(10)
    spacing: dp(20)
    orientation: 'vertical'
    CustomLabel:
        text: 'SIGNUP'
        font_size: root.width/11
        size_hint_max_y: dp(60)
        size_hint_y: 0.2
    CustomTextInput:
        id: username
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        hint_text: 'Username (minimum: 3)'
    CustomTextInput:
        id: password
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        password: True
        hint_text: 'Master Password (minimum: 8)'
    CustomTextInput:
        id: c_password
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        password: True
        hint_text: 'Confirm Master Password'

    BoxLayout:
        id: keyfile
        canvas.before:
            Color:
                rgba:(25/255,25/255,25/255,1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: 10,10,10,10
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        padding: dp(5), 0
        spacing: dp(2)
        pos_hint:{'x':0}
        CheckBox:
            id: enable
            pos_hint: {'x': 0}
            size_hint_x: 0.1
            size_hint_max_x: dp(40)
            background_checkbox_disabled_normal: self.background_checkbox_normal 
            background_checkbox_disabled_down: self.background_checkbox_down 
        CustomLabel:
            font_size: root.width/28 if root.width/28>sp(13) else sp(13)
            font_name: "Fonts/Montserrat-Regular.ttf"
            halign: 'center'
            color: app.color['font']
            line_height: 1.2
            text_size: keyfile.width-keyfile.width/10, None
            text: 'Enable KeyFile Authentication during Login.'  if app._platform != 'android' else "KeyFiles are not convenient for android, choose a strong password."
    GridLayout:
        canvas.before:
        size_hint_y: 0.25
        spacing: dp(40)
        padding: dp(20)
        cols:2
        UIButton:
            id: close
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            text: 'Close'
        UIButton:
            id: confirm
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            text: 'Confirm'





<Tutorial>:
    orientation: 'vertical'
    padding: dp(20)
    spacing: dp(20)
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        scroll_type: ['content', 'bars']
        bar_width: 5
        bar_color:[0,171/255,174/255,1]
        CustomLabel:
            id: label
            padding: dp(10), dp(10)
            text: root.text
            height: self.texture_size[1]
            text_size: self.width,None
            width: root.width - root.width/11
            #halign: 'center'
            color: app.color['font']
            line_height: 1.5
            size_hint: None, None
            font_size: sp(18)
    GridLayout:
        spacing: dp(40)
        cols: 2
        padding: dp(10)
        size_hint_y: 0.2
        UIButton:
            id: exit
            text: 'Exit'
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            size_hint_min_x: dp(30)
        UIButton:
            id: next
            text: 'Next'
            size_hint_max_x: dp(300)
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
<QuickMessage>:
    orientation: 'vertical'
    spacing: dp(20)
    padding: dp(10)
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        scroll_type: ['content', 'bars']
        bar_width: 5
        bar_color:[0,171/255,174/255,1]
        CustomLabel:
            id: message
            padding: dp(10), dp(10)
            height: self.texture_size[1]
            text_size: self.width,None
            width: root.width - root.width/11
            #halign: 'center'
            color: app.color['font']
            line_height: 1.5
            size_hint: None, None
            font_size: sp(16)
    UIButton:
        id: close
        text: 'Close'
        size_hint: 0.3, None
        height: dp(35)
        pos_hint: {'right': 1}

<NavigationView>:
    orientation: 'vertical'
    BoxLayout:
        orientation:'vertical'
        spacing: dp(15)
        CustomLabel:
            text: 'N A V I G A T I O N'
            size_hint_y: None
            height: self.texture_size[1] + dp(20)
        BoxLayout:
            size_hint_y: None
            height: self.minimum_height
            Image:
                size_hint_min_y: dp(90)
                size_hint_max_y: dp(150)
                source: 'UI/logowithborder.png'
        BoxLayout:
            Widget:
                size_hint_max_y: dp(30)
                size_hint_y: 0.7
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: root.height*2/3
        UIButton:
            text: 'New Entry'
        UIButton:
            text: 'Import Entries'
        UIButton:
            text: 'Export Entries'
        UIButton:
            text: 'Backup'
        UIButton:
            text:'Settings'
        CustomLabel:
            text: 'Version 2.0.0'


<Main>:
    name: "main"
    on_pre_enter: root.on_enter_main()
    canvas:
	    Color:
	        rgba:30/255,30/255, 30/255, 1
		Rectangle: 
	        size: self.size
	        pos: self.pos
    BoxLayout:
        canvas.before:
            Color:
                rgba:app.color["main"]
            Line:
                points: [root.width/3, root.height-dp(80), 5, root.height-dp(80), 5, 0]
                width: 5
                cap: "square"
            Line:
                points: [root.width - root.width/3, root.height-dp(80), root.width - 5, root.height-dp(80), root.width-5, 0]
                width: 5
                cap: "square"
        orientation: 'vertical'
        spacing: dp(4)
        GridLayout:
            id: navigation_bar
            cols: 4
            size_hint_y: None
            height: dp(70)
            padding: dp(10)
            Image:
                id: logo
                size_hint: None, None
                size: dp(55), dp(55)
                source: 'UI/logowithborder.png'
            BoxLayout:
                orientation: 'vertical'
                padding: dp(10)
                spacing: dp(25)
                CustomLabel:
                    width: self.texture_size[0]
                    size_hint_x: None
                    text: 'Reminiscor'
                    font_name: 'Fonts/Colchester.ttf'
                    font_size: sp(40)
                CustomLabel:
                    size_hint_x: None
                    width: self.texture_size[0] + dp(5)
                    text: 'Welcome, ' + root.username
                    text_size: dp(160), None
                    shorten: True 
                    shorten_from: 'right'
                    font_size: sp(16) if self.texture_size[0]<=dp(150) else sp(14)
            BoxLayout:
                id: nav_bar_buttons
                Widget:
                UIButton:
                    id: logout
                    text: 'Logout'
                    size_hint: None, None
                    size: dp(80), dp(40)
                    pos_hint: {'center_y': 0.5}
                    on_release: root.logout()
                Widget:
                    size_hint_x: None
                    width: dp(45)
                UIButton:
                    canvas.before:
                        Color:
                            rgba: app.color['background'] 
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: app.color['font'] if self.state == 'normal' else app.color['darkgrey']
                        Ellipse: 
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.center_y - dp(2.5)
                        Ellipse:
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.y 
                        Ellipse:
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.y + self.height - dp(5)  

                    id: nav
                    size_hint: None, None
                    background_down: ''
                    background_normal:''
                    background_color: 0,0,0,0
                    pos_hint: {'center_y': 0.5}
                    size: dp(40), dp(30)
                    on_release: root.navigation()
        BoxLayout:
            size_hint_y: None
            height: dp(45)
            Widget:
            EntryTextInput:
                id: search_bar
                size_hint_y: None
                height: dp(45)
                hint_text: 'Search the Database' 
                size_hint_min_x: dp(320)
                halign: 'center'
                font_size: dp(15)
                on_text: root.search_limit()
            Widget:
        BoxLayout:
            opacity: 0 if app.database == [] else 1
            padding: 0,dp(40),0,0
            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    id: container
                    size_hint_x: None if Window.width>dp(800) else 1
                    width: Window.width - Window.width/8
                    pos_hint: {'center_x': 0.5}
                    orientation: 'vertical'
                    BoxLayout:
                        id: taskbar
                        size_hint: None, None
                        width: rv.width
                        height: dp(40)
                        pos_hint: {'center_x': 0.5}
                        UIButton:
                            text: 'New Entry'
                            background_down: ''
                            background_normal: ''
                            background_color: 0,0,0,0
                            on_release:
                                root.manager.transition = SlideTransition(direction = 'up')
                                root.manager.current = 'add_entry'
                            canvas.before:
                                Color:
                                    rgba: [40/255,40/255,40/255,1] if self.state == 'normal' else app.color['middle']
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                        UIDropDown:
                            elements: ['Sort By', 'A-Z (default)', 'Z-A', 'Newest', 'Oldest']
                            default_item: 'Sort By'
                            dd_background_color: app.color['background'] 
                            dd_item_height: dp(40)
                            dd_item_img_down: ''
                            dd_item_img_normal: ''
                            dd_item_color: [app.color['background'], app.color['darkgrey']]
                            dd_item_isrounded: False 
                            dd_item_font_color: app.color['font'] 
                            dd_item_font: 'Fonts/Montserrat-Light.ttf'
                            dd_item_size_hint_x: 1 
                            dd_width: self.width + dp(40) 
                            dd_open_vertical: 'down'
                            dd_open_horizontal: 'center'
                            calculate_ddheight: True
                            show_items: 5 
                        UIDropDown:
                            elements: ['Database [main]', 'placeholder-1', 'placeholder-2']
                            default_item: 'Database [main]'
                            dd_background_color: app.color['background'] 
                            dd_item_height: dp(40)
                            dd_item_img_down: ''
                            dd_item_img_normal: ''
                            dd_item_color: [app.color['background'], app.color['darkgrey']]
                            dd_item_isrounded: False 
                            dd_item_font_color: app.color['font'] 
                            dd_item_font: 'Fonts/Montserrat-Light.ttf'
                            dd_item_size_hint_x: 1 
                            dd_width: self.width + dp(40) 
                            dd_open_vertical: 'down'
                            dd_open_horizontal: 'center'
                            calculate_ddheight: True
                            show_items: 3
                        UIDropDown:
                            elements: ['Category', 'category-1', 'category-2', 'category-3']
                            default_item: 'Category'
                            dd_background_color: app.color['background'] 
                            dd_item_height: dp(40)
                            dd_item_img_down: ''
                            dd_item_img_normal: ''
                            dd_item_color: [app.color['background'], app.color['darkgrey']]
                            dd_item_isrounded: False 
                            dd_item_font_color: app.color['font'] 
                            dd_item_font: 'Fonts/Montserrat-Light.ttf'
                            dd_item_size_hint_x: 1 
                            dd_width: self.width + dp(40) 
                            dd_open_vertical: 'down'
                            dd_open_horizontal: 'center'
                            calculate_ddheight: True
                            show_items: 3
                    Widget:
                        size_hint_y: None
                        height: dp(20)
                    GridLayout:
                        id: attributes
                        canvas.before:
                            Color:
                                rgba:(40/255,40/255,40/255,1)
                            Rectangle:
                                size: self.size
                                pos: self.pos
                            Color:
                                rgba: app.color['main']
                            Line:
                                points: [self.x + dp(20), self.y + dp(1), self.x + dp(20), self.y+self.height - dp(11)]
                                width: dp(1.2)
                                cap: 'square'
                        cols: 5
                        size_hint:None, None
                        width: rv.width
                        pos_hint: {'center_x': 0.5}
                        height: dp(50)
                        padding: dp(20), dp(10), dp(20), 0
                        UIButton:
                            background_down: 'UI/Mainbuttondown.png'
                            color: app.color['main']
                            size_hint_x: None
                            width: cm(0.7)
                        UIButton:
                            background_down: 'UI/Mainbuttondown.png'
                            color: app.color['main']
                            text: 'Entry Name'
                            size_hint_x: 0.3
                            size_hint_min_x: cm(2)
                        UIButton:
                            text: 'Copy Data'
                            background_down: 'UI/Mainbuttondown.png'
                            color: app.color['main']
                            font_size: sp(14)
                            size_hint_x: 0.2
                        UIButton:
                            text: 'URL'
                            background_down: 'UI/Mainbuttondown.png'
                            color: app.color['main']
                            size_hint_x: 0.1
                    BoxLayout:
                        Widget:
                            size_hint_x: 0.1
                        RecycleView:
                            viewclass: "Entry"
                            data: app.database
                            RecycleGridLayout:
                                id: rv
                                canvas.before:
                                    Color:
                                        rgba:(40/255,40/255,40/255,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                                cols: 1
                                padding: dp(20),0, dp(20), dp(10)
                                default_size_hint: 1, None
                                default_size: None, dp(80)
                                size_hint: 1, None
                                height: self.minimum_height
                        Widget:        
                            size_hint_x: 0.1
<Entry>:
    cols: 5
    canvas.before:
        Color:
            rgba: app.color['main']
        Line:
            points: [self.x, self.y + dp(1), self.x, self.y + self.height - dp(1)]
            width: dp(1.2)
    UIButton:
        background_down: 'UI/Mainbuttondown.png'
        id: entry_serial_no
        text: root.serial_no
        size_hint_x: None
        width: cm(0.7)
    UIButton:
        id: entry_name_url
        font_size: sp(14.5)
        shorten: True
        shorten_from: 'right'
        text_size: self.width-self.width/10, None
        halign: 'center'
        text: root.name
        size_hint_x: 0.3
        size_hint_min_x: cm(2)
    BoxLayout:
        id: copy_col
        orientation: 'vertical'
        size_hint_x: 0.2
        UIButton:
            text: "Copy Username" 
            text_size: self.width - self.width/10, None
            halign: 'center'
            font_size: sp(14)
            shorten: True
            shorten_from: 'right'
        UIButton:
            text: "Copy Password"
            text_size: self.width - self.width/10, None
            halign: 'center'
            shorten: True
            shorten_from: 'right'
            font_size: sp(14)
    UIButton:
        id: open_url
        size_hint_x: 0.1

<AddEntry>:
    name: 'add_entry'
    #on_pre_enter: root.set_layout()
    BoxLayout:
        canvas.before:
            Color:
                rgba:app.color["main"]
            Line:
                points: [root.width/3, root.height-dp(80), 5, root.height-dp(80), 5, 0]
                width: 5
                cap: "square"
            Line:
                points: [root.width - root.width/3, root.height-dp(80), root.width - 5, root.height-dp(80), root.width-5, 0]
                width: 5
                cap: "square"
        orientation: 'vertical'
        GridLayout:
            id: navigation_bar
            cols: 4
            size_hint_y: None
            height: dp(70)
            padding: dp(10)
            Image:
                id: logo
                size_hint: None, None
                size: dp(55), dp(55)
                source: 'UI/logowithborder.png'
            BoxLayout:
                orientation: 'vertical'
                padding: dp(10)
                spacing: dp(25)
                CustomLabel:
                    width: self.texture_size[0]
                    size_hint_x: None
                    text: 'Reminiscor'
                    font_name: 'Fonts/Colchester.ttf'
                    font_size: sp(40)
            BoxLayout:
                id: nav_bar_buttons
                Widget:
                UIButton:
                    id: logout
                    text: 'Logout'
                    size_hint: None, None
                    size: dp(80), dp(40)
                    pos_hint: {'center_y': 0.5}
                    on_release: root.logout()
                Widget:
                    size_hint_x: None
                    width: dp(45)
                UIButton:
                    canvas.before:
                        Color:
                            rgba: app.color['background'] 
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: app.color['font'] if self.state == 'normal' else app.color['darkgrey']
                        Ellipse: 
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.center_y - dp(2.5)
                        Ellipse:
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.y 
                        Ellipse:
                            size: dp(5) , dp(5)
                            pos: self.center_x - dp(2.5), self.y + self.height - dp(5)  

                    id: nav
                    size_hint: None, None
                    background_down: ''
                    background_normal:''
                    background_color: 0,0,0,0
                    pos_hint: {'center_y': 0.5}
                    size: dp(40), dp(30)
                    on_release: root.navigation()
        BoxLayout:
            size_hint_y: None
            height: dp(45) 
            Widget:
            CustomLabel:
                canvas.before:
                    Color:
                        rgba: app.color['background']
                    Rectangle:
                        size: self.size
                        pos: self.pos
                    Color:
                        rgba: app.color['main']
                    Line:
                        points: [self.x, self.y, self.x, self.y + self.height, self.x + self.width, self.y + self.height, self.x + self.width, self.y, self.x, self.y]
                        width: dp(1.2)
                color: app.color['font']
                text: 'Add Entry'
                font_size: sp(24)
                valign: 'top'
                size_hint_x: 1
            Widget:
        Widget:
            size_hint_y: None
            height: dp(30)
        BoxLayout:
            BoxLayout:
                Widget:
                    size_hint_x: 0.1
                BoxLayout:
                    spacing: dp(15)
                    orientation: 'vertical'
                    CustomLabel:
                        text: 'Enter the following details:'
                        size_hint: None, None
                        size: self.texture_size
                        color: app.color['font']
                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        EntryTextInput:
                            id: title
                            hint_text: 'Title'
                            height: dp(50)
                            size_hint_x: 0.8
                            font_size: sp(18)
                            size_hint_min_x: dp(300)
                        CustomLabel:
                            size_hint: None, None
                            size: dp(50), self.texture_size[1]
                            font_size: dp(16)
                            text: str(len(title.text)) + '/32' 
                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        EntryTextInput:
                            id: username
                            hint_text: 'Username'
                            height: dp(40)
                            size_hint_x: 0.6
                            size_hint_min_x: dp(250)
                        CustomLabel:
                            size_hint: None, None
                            size: dp(30), self.texture_size[1]
                            font_size: dp(16)
                            text: str(len(username.text)) 
                        Widget:
                            size_hint_y: None
                            height: 0
                            size_hint_x: 0.2
                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        EntryTextInput: 
                            hint_text: 'Password'
                            height: dp(40)
                            size_hint_x: 0.6
                            password: True
                            size_hint_min_x: dp(250)
                        CustomLabel:
                            size_hint: None, None
                            size: dp(30), self.texture_size[1]
                            font_size: dp(16)
                            text: str(len(title.text))
                        Widget:
                            size_hint_y: None
                            height: 0
                            size_hint_x: 0.2
                    Widget:
                Widget:
                    size_hint_x: 0.1


#: import RGBA kivy.utils.rgba
#: import Window kivy.core.window.Window
Screen_Manager:
    Login:
    Main:
    AddEntry:
<CustomLabel@Label>:
    color: app.color['main']
    font_name: 'Fonts/Montserrat-Light.ttf'
    disabled_color: self.color
    markup: True
<UIButton@Button>:
    background_normal: 'UI/Mainbuttondown.png'
    background_down: 'UI/Mainbutton.png'
    markup: True
    font_name: 'Fonts/Montserrat-Light.ttf'
    font: sp(15)
    color: app.color['font']
    background_disabled_normal: self.background_normal
    background_disabled_down: self.background_down
    disabled_color: self.color
<CustomTextInput>:
    background_color:  app.color['middle']
    foreground_color: app.color['font']
    background_normal: ''
    padding: 6,(self.height-self.line_height)/2,6,6
    multiline: False
    background_disabled_normal: ''
    font_name: 'Fonts/Montserrat-Light.ttf'
    font_size: self.width/22 if self.width/22>sp(18) else sp(18)
    cursor_color: app.color['main']
    hint_text_color: app.color['darkgrey']
    size_hint_y: None
    write_tab: False
    disabled_foreground_color: self.foreground_color if self.text else self.hint_text_color
    disabled_background_color: self.background_color if self.text else self.hint_text_color

#  --------------------- LGIN SCREEN -----------------


<Login>:
    name: 'login'
    BoxLayout: # this boxlayout centers the grid layout that contains the text inpot and buttons 
        canvas.before:
            Color:
                rgba:app.color['main']
            Line:
                points: [root.width/5,root.height,0,root.height,0,0]
                width: 10
                cap: "square"
            Line:
                points: [root.width-root.width/5,root.height,root.width,root.height,root.width,0]
                width: 10
                cap: "square"
        Widget: # Added widgets on each side of the gridlayout so that it's in between
            size_hint_x: 0.2 if app._platform!='android' else 0.08 # cause android has a lesser width
        GridLayout:
            cols: 1
            size_hint_max_x: dp(800) # this holds the grid layout in center, other wise the boxlayout down below sticks to left
            size_hint_min_x: dp(340)
            spacing: dp(30)
            padding: dp(20)
            CustomLabel:
                size_hint_y: 0.1
                text: 'Reminiscor'
                font_name: 'Fonts/Colchester.ttf'
                font_size: sp(80) if Window.size[1] < sp(670) else sp(95)
            BoxLayout: # this box layout is messy 
                canvas.before:
                    Color:
                        rgba: (37/255,37/255,37/255,1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: 15,15,15,15
                size_hint_max_y: dp(400)
                orientation: 'vertical'
                padding: dp(40)
                spacing: dp(10)
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    CustomLabel:
                        text: 'LOGIN:'
                        heigth: dp(30)
                        font_size: sp(30)
                    BoxLayout:
                        padding: 5
                        Widget: # These widgets keep the text input in the center as well
                            size_hint_x: 0.1    
                        CustomTextInput:
                            id: password
                            hint_text: 'Master Password'
                            size_hint_y: None
                            password: True
                            font_size: sp(20)
                            height: dp(50)
                            size_hint_max_x: dp(600)
                            size_hint_min_x: dp(150)
                        Widget:
                            size_hint_x: 0.1
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(20)
                    UIButton:
                        id: login
                        text: 'Login'
                        size_hint_max_y: dp(50)
                        size_hint_x: 0.5
                        pos_hint:{'center_x': 0.5}
                        background_normal: 'UI/Mainbutton.png'
                        background_down: 'UI/Mainbuttondown.png'
                        on_release: root.welcome()
                    UIButton:
                        id: signup
                        text: 'SignUp'
                        size_hint_max_y: dp(50)
                        size_hint_x: 0.5
                        pos_hint:{'center_x': 0.5}
                        background_normal: 'UI/Mainbutton.png'
                        background_down: 'UI/Mainbuttondown.png'
                        on_release: root.call_signup()
            CustomLabel:
                text: 'E N C R Y P T I N G    A N X I E T I E S'
                font_size: root.width/30 if root.width/30<sp(30) else sp(30)
                size_hint_y: 0.1
        Widget:
            size_hint_x: 0.2 if app._platform!='android' else 0.08


#  --------------------- WELCOME POPUP -----------------

<Welcome>:
    canvas.before:
        Color:
            rgba:app.color['main']
        Line:
            points: [self.x+self.width/5, self.top-dp(5), self.x, self.top-dp(5), self.x, self.y+dp(5)]
            width: 5
            cap: 'square'
        Line:
            points: [self.right-self.width/5, self.top-dp(5), self.right, self.top-dp(5), self.right, self.y+dp(5)]
            width: 5
            cap: 'square'
    orientation: 'vertical'
    padding: dp(20)
    spacing: dp(20)
    CustomLabel:
        text: 'Welcome'
        font_size: root.width/7 if root.width/7<sp(70) else sp(70)
        size_hint_max_y: dp(60)
        size_hint_y: 0.2
        font_name: 'Fonts/Colchester.ttf'
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        size_hint_y: 1
        bar_width: 3
        bar_color:[0,171/255,174/255,1]
        scroll_type: ['content', 'bars']
        CustomLabel:
            padding: dp(10), dp(10)
            text: root.text
            height: self.texture_size[1]
            text_size: self.width,None
            line_height: 1.5
            width: root.width - root.width/11
            halign: 'center'
            size_hint: None, None
            font_size: sp(18)
    GridLayout:
        spacing: dp(40)
        cols: 2
        padding: dp(10)
        size_hint_y: 0.25
        UIButton:
            id: close
            text: 'Close'
            size_hint_x: 0.3 if app._platform != 'android' else 0.35
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            size_hint_min_x: dp(30)
        UIButton:
            id: tutorial
            text: 'Take The Tutorial'
            size_hint_max_x: dp(300)
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)


#  --------------------- SIGN UP POPUP -----------------



<Signup>:
    padding: dp(10)
    spacing: dp(20)
    orientation: 'vertical'
    CustomLabel:
        text: 'SIGNUP'
        font_size: root.width/11
        size_hint_max_y: dp(60)
        size_hint_y: 0.2
    CustomTextInput:
        id: username
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        hint_text: 'Username (minimum: 3)'
    CustomTextInput:
        id: password
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        password: True
        hint_text: 'Master Password (minimum: 8)'
    CustomTextInput:
        id: c_password
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        password: True
        hint_text: 'Confirm Master Password'

    BoxLayout:
        id: keyfile
        canvas.before:
            Color:
                rgba:(25/255,25/255,25/255,1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: 10,10,10,10
        size_hint_y: 0.15
        size_hint_max_y: dp(60)
        padding: dp(5), 0
        spacing: dp(2)
        pos_hint:{'x':0}
        CheckBox:
            id: enable
            pos_hint: {'x': 0}
            size_hint_x: 0.1
            size_hint_max_x: dp(40)
            background_checkbox_disabled_normal: self.background_checkbox_normal 
            background_checkbox_disabled_down: self.background_checkbox_down 
        CustomLabel:
            font_size: root.width/28 if root.width/28>sp(13) else sp(13)
            font_name: "Fonts/Montserrat-Regular.ttf"
            halign: 'center'
            color: app.color['font']
            line_height: 1.2
            text_size: keyfile.width-keyfile.width/10, None
            text: 'Enable KeyFile Authentication during Login.'  if app._platform != 'android' else "KeyFiles are not convenient for android, choose a strong password."
    GridLayout:
        canvas.before:
        size_hint_y: 0.25
        spacing: dp(40)
        padding: dp(20)
        cols:2
        UIButton:
            id: close
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            text: 'Close'
        UIButton:
            id: confirm
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            text: 'Confirm'





<Tutorial>:
    orientation: 'vertical'
    padding: dp(20)
    spacing: dp(20)
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        scroll_type: ['content', 'bars']
        bar_width: 5
        bar_color:[0,171/255,174/255,1]
        CustomLabel:
            padding: dp(10), dp(10)
            text: root.text
            height: self.texture_size[1]
            text_size: self.width,None
            width: root.width - root.width/11
            #halign: 'center'
            color: app.color['font']
            line_height: 1.5
            size_hint: None, None
            font_size: sp(18)
    GridLayout:
        spacing: dp(40)
        cols: 2
        padding: dp(10)
        size_hint_y: 0.2
        UIButton:
            id: exit
            text: 'Exit Tutorial'
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
            size_hint_min_x: dp(30)
        UIButton:
            id: next
            text: 'Next'
            size_hint_max_x: dp(300)
            size_hint_max_y: dp(50)
            size_hint_min_y: dp(40)
<QuickMessage>:
    orientation: 'vertical'
    spacing: dp(20)
    padding: dp(10)
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        scroll_type: ['content', 'bars']
        bar_width: 5
        bar_color:[0,171/255,174/255,1]
        CustomLabel:
            id: message
            padding: dp(10), dp(10)
            height: self.texture_size[1]
            text_size: self.width,None
            width: root.width - root.width/11
            #halign: 'center'
            color: app.color['font']
            line_height: 1.5
            size_hint: None, None
            font_size: sp(16)
    UIButton:
        id: close
        text: 'Close'
        size_hint: 0.3, None
        height: dp(35)
        pos_hint: {'right': 1}